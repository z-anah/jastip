<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Jastip Tunisia oleh Anah" />
  <meta property="og:description" content="Jastip produk asli Tunisia, langsung kirim ke Indonesia. Cek daftar produk dan order di sini!" />
  <meta property="og:image" content="https://github.com/z-anah/jastip/blob/main/src/img/thumbnail.png?raw=true" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Open Jastip Tunisia" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Jastip Tunisia oleh Anah" />
  <meta property="og:locale" content="id_ID" />
  <title>By Anah</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <!-- ...existing code... -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<style>
  /* Markdown styles for easy reading */
  .markdown-body h1, .markdown-body h2, .markdown-body h3 {
    font-weight: 600;
    margin-top: 1.2em;
    margin-bottom: 0.5em;
  }
  .markdown-body p {
    margin-bottom: 0.8em;
    line-height: 1.7;
  }
  .markdown-body ul, .markdown-body ol {
    margin-left: 1.2em;
    margin-bottom: 0.8em;
  }
  .markdown-body li {
    margin-bottom: 0.3em;
  }
  .markdown-body blockquote {
    border-left: 4px solid #d1d5db;
    padding-left: 1em;
    color: #374151;
    background: #f9fafb;
    margin: 1em 0;
  }
  .markdown-body strong {
    font-weight: 600;
    color: #111827;
  }
  .markdown-body em {
    color: #374151;
  }
  .markdown-body hr {
    border: none;
    border-top: 1px solid #e5e7eb;
    margin: 1.5em 0;
  }
</style>

<body class="bg-gray-50 text-gray-800">
<div id="app" class="max-w-md mx-auto p-4">

  <!-- HEADER -->
   <header class="mb-4 flex justify-between items-center">
    <h1 class="text-lg font-semibold">By Anah
    </h1>
    <button @click="page='cart'" class="text-sm flex items-center gap-1">
      <img src="https://img.icons8.com/?size=64&id=y21Zo14Go4LV&format=png" alt="Keranjang" class="w-5 h-5">
      ({{ cart.length }})
    </button>
  </header>

  <!-- LIST PAGE -->
  <div v-if="page === 'list'" class="mb-24">
    <div class="grid grid-cols-2 gap-3">
      <!-- Product cards -->
      <div v-for="p in products" :key="p.id">
        <template v-if="p.type === 'ad'">
          <!-- Ad card: full image, 320x320px -->
          <div
            class="bg-white rounded-lg overflow-hidden shadow-sm flex flex-col h-80 p-0 cursor-pointer"
            @click="openDetailById(p.productId);"
          >
            <img
              :src="p.image"
              class="w-full h-full object-cover"
              style="width:320px; height:320px;"
              alt="Ad"
            >
          </div>
        </template>
        <template v-else>
          <div class="bg-white rounded-lg overflow-hidden shadow-sm h-80 flex flex-col">
            <div class="relative w-full pt-[100%]">
              <img :src="p.image" class="absolute top-0 left-0 w-full h-full object-cover">
              <img
                src="https://img.icons8.com/?size=48&id=6KiDYP2M5aXT&format=png"
                alt="Hot"
                class="absolute bottom-4 right-2 w-6 h-6"
                style="z-index:2"
              >
            </div>
            <div class="p-3 flex-1">
              <p class="font-medium text-sm mb-1 line-clamp-2 h-10" :title="p.name">{{ p.name }}</p>
              <p class="text-xs text-gray-500 mb-2">Rp{{ p.price.toLocaleString() }}</p>
              <div class="flex items-center justify-between gap-2">
                <button
                  class="text-xs text-blue-500"
                  @click="openDetail(p)"
                >
                  Detail
                </button>
                <div v-if="getCartQuantity(p) > 0" class="flex items-center gap-1">
                  <button @click="decreaseProduct(p)" class="px-2 py-1 bg-gray-100 rounded text-sm">âˆ’</button>
                  <span class="px-2 text-sm">{{ getCartQuantity(p) }}</span>
                  <button @click="addToCart(p)" class="px-2 py-1 bg-gray-100 rounded text-sm">+</button>
                </div>
                <button
                  v-else
                  class="text-xs bg-black text-white px-3 py-1 rounded"
                  @click="addToCart(p)"
                >
                  Tambah
                </button>
              </div>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>

  <!-- DETAIL PAGE -->
  <div v-if="page === 'detail' && selected" class="mb-24">
    <div class="relative mb-3">
      <div class="flex justify-center mb-3">
        <img :src="selected.image" class="w-80 h-80 object-cover rounded">
      </div>
      <img
        src="https://img.icons8.com/?size=48&id=6KiDYP2M5aXT&format=png"
        alt="Hot"
        class="absolute -bottom-2 right-8 w-9 h-9"
        style="z-index:2"
      >
    </div>

    <h2 class="text-lg font-semibold mb-2">{{ selected.name }}</h2>
    <p class="text-xs text-gray-500 mb-1">Rp{{ selected.price.toLocaleString() }}</p>

    <div class="flex items-center gap-1 justify-end mb-4">
      <template v-if="getCartQuantity(selected) > 0">
        <button @click="decreaseProduct(selected)" class="px-2">âˆ’</button>
        <span class="px-1">{{ getCartQuantity(selected) }}</span>
        <button @click="addToCart(selected)" class="px-2">+</button>
      </template>
      <button
        v-else
        class="text-xs bg-black text-white px-2 py-1 rounded"
        @click="addToCart(selected)"
      >
        Tambah
      </button>
    </div>
    
    <div class="text-sm mb-4 markdown-body" v-html="renderMarkdown(selected.deskripsi)"></div>


    <div class="flex items-center gap-1 justify-end mb-4">
      <button
        class="text-xs bg-black text-white px-2 py-1 rounded"
        @click="page='list'"
      >
        Kembali
      </button>
    </div>
  </div>

  <!-- CART PAGE -->
  <div v-if="page === 'cart'" class="mb-24">
    <h2 class="font-semibold mb-2">Keranjang</h2>

    <table class="w-full text-sm bg-white rounded-lg overflow-hidden mb-4">
      <tr v-for="(item, i) in cart" :key="i" class="border-b">
        <td class="p-2">
          <img :src="item.product.image" class="w-14 h-14 object-cover rounded">
        </td>
        <td class="p-2">
          <p class="font-medium">{{ item.product.name }}</p>
          <p class="text-xs text-gray-500">Rp{{ item.product.price.toLocaleString() }}</p>
        </td>
        <td class="p-2 text-right">
          <div class="flex items-center gap-1 justify-end">
            <button @click="decreaseQuantity(i)" class="px-2">âˆ’</button>
            <span class="px-1">{{ item.quantity }}</span>
            <button @click="increaseQuantity(i)" class="px-2">+</button>
          </div>
        </td>
      </tr>
      <tr v-if="cart.length === 0">
        <td colspan="3" class="text-center p-4 text-gray-400">Keranjang kosong</td>
      </tr>
    </table>
    <div class="text-right font-semibold mb-2">
      Total: Rp{{ totalPrice.toLocaleString() }}
    </div>


    <button
      @click="sendWhatsapp"
      class="w-full bg-black text-white py-2 rounded flex items-center justify-center gap-2"
      type="button"
    >
      <img src="https://img.icons8.com/?size=64&id=Fr3lHZpaL8k5&format=png" alt="WhatsApp" class="w-5 h-5">
      Pesan via WhatsApp
    </button>
    <!-- back button like pesan button -->
    <div class="w-full bg-black text-green-600 py-2 rounded flex items-center justify-center gap-2 mt-2">
      <button
        @click="page='list'"
        class="w-full text-white"
        type="button"
      >
        Kembali
      </button>

    </div>
  </div>

  <!-- NAVIGATION BAR -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around items-center py-2 z-10 max-w-md mx-auto">
    <button @click="page='list'" :class="navClass('list')" class="flex flex-col items-center text-xs">
      <img src="https://img.icons8.com/?size=64&id=PmSC86guKh6C&format=png" alt="Daftar" class="w-6 h-6 mb-1">
      Daftar
    </button>
    <button @click="page='cart'" :class="navClass('cart')" class="flex flex-col items-center text-xs">
      <img src="https://img.icons8.com/?size=64&id=y21Zo14Go4LV&format=png" alt="Keranjang" class="w-6 h-6 mb-1">
      Keranjang
    </button>
    <button @click="page='info'" :class="navClass('info')" class="flex flex-col items-center text-xs">
      <img src="https://img.icons8.com/?size=64&id=zyt9WZ3jEcGG&format=png" alt="Informasi" class="w-6 h-6 mb-1">
      Informasi
    </button>
  </nav>

  <!-- INFO JASTIP PAGE -->
  <div v-if="page === 'info'">
    <div class="bg-white rounded-lg p-4 mb-4">
    <h2 class="text-lg font-semibold mb-2">Informasi Jastip Tunisia</h2>
    <ul class="text-sm text-gray-700 list-disc pl-5 mb-2">
      <li>Jastip oleh Anah, tinggal di Tunisia ðŸ‡¹ðŸ‡³</li>
      <li>Produk asli Tunisia, dikirim ke Indonesia</li>
      <li>Order via WhatsApp, pembayaran transfer</li>
      <li>Estimasi pengiriman 2-4 minggu</li>
    </ul>
    <p class="text-xs text-gray-500 mb-1">Hubungi WhatsApp untuk pertanyaan lebih lanjut.</p>
    </div>
    <button
      @click="shareToWhatsapp"
      class="w-full bg-black text-white py-2 rounded flex items-center justify-center gap-2"
      type="button"
    >
      <img src="https://img.icons8.com/?size=64&id=Fr3lHZpaL8k5&format=png" alt="WhatsApp" class="w-5 h-5">
      Bagikan Jastip ke WhatsApp
    </button>
  </div>

</div>

<script>
// https://icons8.com/icons/set/best-top--style-liquid-glass-color
const { createApp } = Vue

createApp({
  data() {
    return {
      page: 'list',
      selected: null,
      cart: [],
      products: [
        {
          id: 1,
          name: 'Pistachio asin bercangkang 100 g',
          image: 'https://www.carrefour.tn/media/catalog/product/2/8/2828991000000-1.webp?auto=webp&format=pjpg&width=2560&height=3200&fit=cover',
          deskripsi: `
## Pistachio Tunisia Asli

Nikmati **kacang pistachio premium** dari Tunisia, terkenal dengan rasa gurih dan tekstur renyahnya.

### Detail Produk
- Berat: **100g**
- Dikemas utuh dengan cangkang
- Rasa asin alami, tanpa bahan pengawet

### Manfaat
- Sumber protein & serat
- Kaya antioksidan
- Camilan sehat untuk keluarga

### Cocok Untuk
- Teman minum teh/kopi
- Camilan saat bekerja atau belajar
- Oleh-oleh khas Tunisia

> Pistachio Tunisia dipanen langsung dari kebun lokal, dijamin segar dan berkualitas!

---

*Stok terbatas, segera pesan sebelum kehabisan!*
`,
          price: 67000
        },
        {
          id: 2,
          name: 'Inti kenari kualitas ekstra 100 g',
          image: 'https://www.carrefour.tn/media/catalog/product/2/8/2824833000000.webp',
          deskripsi: `
## Kenari Tunisia Kualitas Ekstra
Rasakan kenikmatan **inti kenari premium** dari Tunisia, pilihan tepat untuk camilan sehat dan bergizi.
### Detail Produk
- Berat: **100g**
- Hanya inti kenari, tanpa cangkang
- Kualitas ekstra, rasa lezat dan tekstur renyah
### Manfaat
- Sumber asam lemak omega-3
- Kaya protein & serat
- Mendukung kesehatan jantung & otak
### Cocok Untuk
- Campuran salad & yogurt
- Bahan kue & roti
- Camilan sehat sehari-hari

> Kenari Tunisia dipanen dari pohon terbaik, dijamin segar dan berkualitas tinggi!
---
*Stok terbatas, segera pesan sebelum kehabisan!*
`,
          price: 27000
        },
        {
          id: 3,
          name: 'Kacang almond 100 g',
          image: 'https://www.carrefour.tn/media/catalog/product/2/8/2828194000000.webp?auto=webp&format=pjpg&width=2560&height=3200&fit=cover',
          deskripsi: `
## Almond Tunisia Asli
Nikmati **kacang almond premium** dari Tunisia, terkenal dengan rasa lezat dan tekstur renyahnya.
### Detail Produk
- Berat: **100g**
- Kacang almond utuh, tanpa kulit
- Rasa alami, tanpa tambahan garam atau gula
### Manfaat
- Sumber vitamin E & magnesium
- Kaya protein & serat
- Mendukung kesehatan jantung & kulit
### Cocok Untuk
- Camilan sehat sehari-hari
- Campuran salad & oatmeal
- Bahan kue & roti

> Almond Tunisia dipanen dari kebun lokal, dijamin segar dan berkualitas tinggi!
---
*Stok terbatas, segera pesan sebelum kehabisan!*
`,
          price: 32000
        },
        {
          id: 'ad-1',
          type: 'ad',
          image: 'https://github.com/z-anah/jastip/blob/main/src/img/pack-1-ad.png?raw=true',
          title: 'Sponsored',
          link: 'https://www.example.com',
          productId: 4
        },
        {
          id: 4,
          name: 'Pack 1 ramadan: kurma, almond, pistachio',
          image: 'https://github.com/z-anah/jastip/blob/main/src/img/pack-1.png?raw=true',
          deskripsi: `
## Pack Ramadan Spesial 1
Nikmati paket camilan sehat khas Ramadan dari Tunisia, terdiri dari:
- **Kurma Deglet Nour 250g**: Manis alami, kaya serat & energi
- **Almond 100g**: Sumber vitamin E & protein
- **Pistachio 100g**: Rasa gurih, kaya antioksidan

### Manfaat
- Camilan sehat untuk berbuka & sahur
- Sumber energi alami
### Cocok Untuk
- Keluarga & teman saat Ramadan
- Oleh-oleh khas Tunisia

> Semua produk dipilih langsung dari Tunisia, dijamin segar dan berkualitas tinggi!
---
*Stok terbatas, segera pesan sebelum kehabisan!*
`,
          price: 60000
        },
        {
          id: 5,
          name: 'Kurma bertangkai dalam kemasan tray',
          image: 'https://www.carrefour.tn/media/catalog/product/6/1/6191567000092_3.webp?auto=webp&format=pjpg&width=2560&height=3200&fit=cover',
          deskripsi: `
## Kurma Bertangkai Tunisia

Kurma bertangkai segar dalam kemasan tray, cocok untuk oleh-oleh dan camilan sehat.

### Detail Produk
- Berat: Sesuai kemasan
- Kurma bertangkai, rasa manis alami
- Dikemas praktis dan higienis

### Manfaat
- Sumber energi alami
- Kaya serat dan vitamin

### Cocok Untuk
- Camilan keluarga
- Oleh-oleh khas Tunisia

> Kurma dipanen langsung dari kebun Tunisia, segar dan berkualitas!`,
          price: 85000
        },
        {
          id: 6,
          name: 'Minyak zaitun extra virgin 500 ml',
          image: 'https://www.carrefour.tn/media/catalog/product/6/1/6191598700923-1.webp',
          deskripsi: `
## Minyak Zaitun Extra Virgin 500ml

Minyak zaitun asli Tunisia, kualitas extra virgin, cocok untuk masakan dan salad.

### Detail Produk
- Isi: 500ml
- Extra virgin, rasa khas Tunisia
- Tanpa bahan pengawet

### Manfaat
- Menjaga kesehatan jantung
- Kaya antioksidan

### Cocok Untuk
- Salad, masakan, dan roti

> Minyak zaitun diproses alami dari kebun Tunisia!`,
          price: 0,
          link: 'https://www.carrefour.tn/huile-dolive-extra-vierge-6191598700923.html',
        },
        {
          id: 7,
          name: 'Minyak zaitun extra virgin 250 ml',
          image: 'https://www.carrefour.tn/media/catalog/product/6/1/6191598701098-1_2.webp',
          deskripsi: `
## Minyak Zaitun Extra Virgin 250ml

Minyak zaitun asli Tunisia, kualitas extra virgin, cocok untuk masakan dan salad.

### Detail Produk
- Isi: 250ml
- Extra virgin, rasa khas Tunisia

### Manfaat
- Menjaga kesehatan jantung
- Kaya antioksidan

### Cocok Untuk
- Salad, masakan, dan roti

> Minyak zaitun diproses alami dari kebun Tunisia!`,
          price: 0
        },
        {
          id: 8,
          name: 'Minyak zaitun extra virgin rasa lembut 1l',
          image: 'https://www.carrefour.tn/media/catalog/product/6/1/6191598700732_1.webp?auto=webp&format=pjpg&width=2560&height=3200&fit=cover',
          deskripsi: `
## Minyak Zaitun Extra Virgin Rasa Lembut 1L

Minyak zaitun extra virgin dengan rasa lembut, cocok untuk berbagai masakan.

### Detail Produk
- Isi: 1 liter
- Extra virgin, rasa lembut

### Manfaat
- Menjaga kesehatan jantung
- Kaya antioksidan

### Cocok Untuk
- Salad, masakan, dan roti

> Minyak zaitun diproses alami dari kebun Tunisia!`,
          price: 0
        },
        // {
        //   id: 9,
        //   name: 'xxx',
        //   image: 'xxx',
        //   deskripsi: `xxx`,
        //   price: 0
        // },
        // {
        //   id: 10,
        //   name: 'xxx',
        //   image: 'xxx',
        //   deskripsi: `xxx`,
        //   price: 0
        // },
        // {
        //   id: 100,
        //   name: 'xxx',
        //   image: 'xxx',
        //   deskripsi: `xxx`,
        //   price: 0
        // },
      ]
    }
  },
  computed: {
    totalPrice() {
      return this.cart.reduce((sum, item) => sum + item.product.price * item.quantity, 0)
    }
  },
  methods: {
    renderMarkdown(text) {
      return marked.parse(text || '');
    },
    openDetail(p) {
      this.selected = p
      this.page = 'detail'
    },
    openDetailById(id) {
      const product = this.products.find(p => p.id == id && !p.type)
      if (product) {
        this.openDetail(product)
      }
    },
    addToCart(p) {
      const existing = this.cart.find(item => item.product.id === p.id)
      if (existing) {
        existing.quantity++
      } else {
        this.cart.push({ product: p, quantity: 1 })
      }
    },
    increaseQuantity(index) {
      this.cart[index].quantity++
    },
    decreaseQuantity(index) {
      if (this.cart[index].quantity > 1) {
        this.cart[index].quantity--
      } else {
        this.cart.splice(index, 1)
      }
    },
    sendWhatsapp() {
      if (this.cart.length === 0) return;

      const text = this.cart
        .map((item, i) =>
          `${i + 1}. ${item.product.name} (Rp${item.product.price.toLocaleString()} x ${item.quantity})`
        )
        .join('%0A');

      const total = this.totalPrice.toLocaleString();
      const phone = '6287772897512'; // ganti nomor WA
      const url = `https://wa.me/${phone}?text=Order%20Jastip:%0A${text}%0A%0ATotal:%20Rp${total}`;

      window.open(url, '_blank');
    },
    getCartQuantity(p) {
      const item = this.cart.find(item => item.product.id === p.id)
      return item ? item.quantity : 0
    },
    decreaseProduct(p) {
      const idx = this.cart.findIndex(item => item.product.id === p.id)
      if (idx !== -1) {
        if (this.cart[idx].quantity > 1) {
          this.cart[idx].quantity--
        } else {
          this.cart.splice(idx, 1)
        }
      }
    },
    navClass(pageName) {
      return this.page === pageName
        ? 'text-blue-600 font-semibold'
        : 'text-gray-500'
    },
    shareToWhatsapp() {
      const siteUrl = window.location.href;
      const produkList = this.products
        .filter(p => !p.type || p.type !== 'ad')
        .slice(2, 8)
        .map(p => `â€¢ ${p.name} \`\`\`(Rp${p.price.toLocaleString()})\`\`\``)
        .join('%0A');

      const keunggulan = [
        'â€¢ Produk asli Tunisia',
        'â€¢ Langsung dikirim dari Tunisia ke Indonesia',
        'â€¢ Kualitas premium, segar dan terjamin',
        'â€¢ Jastip personal, bisa tanya-tanya langsung via WhatsApp',
        'â€¢ Harga bersaing, transparan tanpa biaya tersembunyi'
      ].join('%0A');

      const text =
        `*Jastip Tunisia by Anah*%0A%0A` +
        `*Daftar produk tersedia:*%0A${produkList}%0A%0A` +
        `*Kenapa beda?*%0A${keunggulan}%0A%0A` +
        `*Lihat detail dan order di sini:*%0Aâ€¢ ${encodeURIComponent(siteUrl)}`;

      const url = `https://wa.me/?text=${text}`;
      window.open(url, '_blank');
    },
  }
}).mount('#app')
</script>
</body>
</html>
